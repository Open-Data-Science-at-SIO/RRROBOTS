<!DOCTYPE html>
<html>
  <head>
    <title>Package Writing</title>
    <meta charset="utf-8">
    <meta name="author" content="Hao Ye" />
    <link href="libs/remark-css/example.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Package Writing
## RRROBOTS Week 6
### Hao Ye
### 2017, May 9

---


# Lesson Objectives

### Project Status
### Package Writing Demo

---
class: center, middle, inverse

# Project Status

---

# Project Check-in

### Roadmaps
* Current status
* (Feel free to revise and add/eliminate tasks as projects develop)

### Obstacles
* What can I or others help with?

---

class: center, middle, inverse

# Package Writing

---
# Motivations

* share your code with yourself and/or others

* adopt conventions for organizing code
  - file/folder layout
  - documentation (of code OR data)
  - writing general-use functions

---

# Example

https://github.com/aurielfournier/rel
![](package_demo.png)

---
# What Can Be Included?

### datasets

### project or document templates

### re-usable functions

---
# How To Get Started?

### Reference Material
Lots of detailed info here:
http://r-pkgs.had.co.nz/intro.html

### Demo Outline
* create a basic package
* add functions
* add dataset
* add documentation
* add unit tests
* build and install

---
# Some Handy Add-on Packages

* `devtools` - helper functions with some RStudio integration
* `roxygen2` - builds .Rd documentation from comments
* `testthat` - unit testing functions
* `knitr` - build vignettes (e.g. tutorials / user guides)

--

*Not strictly necessary, but do make your life easier...*

---
# Making a New Package

### Using RStudio

`File -&gt; New Project -&gt; New Directory -&gt; R package`

will open a window to make a new R package.

### Package Names

Package names:
* can only consist of letters, numbers, and periods
* must being with a letter
* cannot end with a period

---
# Building the Package

### Build and Reload
Clicking this will build and install our package, then open a new R session and load the package. This allows us to test the package in the R console.

### Build Source Package
This produces a `bundle` file containing all the necessary files in the package for someone else to build it.

### Build Binary Package
This produces a binary form of the package tha anyone can install. Note that the binary is specific to the operating system and R version.

---
# R Code

The R code resides in script files in the `R` directory. These will define the functions that are part of the package.

### Notes
* To use other packages, define them appropriately in the `DESCRIPTION` file.
* Side-effects can be created by defining `.onLoad` and `.onAttach` functions.

---
# Package DESCRIPTION

The `DESCRIPTION` file contains summary metadata your package:
* what it is
* who wrote it
* what it depends on
* how can it be used

---


---
# References
http://r-pkgs.had.co.nz/intro.html
http://stat545.com/packages00_index.html

---

class: center, middle

# Acknowledgments

Class supported by:

&lt;img width=50% src = "mozilla_science_logo.png"&gt;
&lt;img width=50% src = "open_data_science_logo.png"&gt;

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": false,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('showSlide', function (slide) {setTimeout(function() {window.dispatchEvent(new Event('resize'));}, 100)});</script>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
